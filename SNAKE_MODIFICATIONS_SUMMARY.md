# Snakeæ¸¸æˆä¿®æ”¹æ€»ç»“

## ğŸ¯ ä¿®æ”¹æ¦‚è¿°

æœ¬æ–‡æ¡£æ€»ç»“äº†Snakeæ¸¸æˆçš„æ‰€æœ‰ä¿®æ”¹ï¼ŒåŒ…æ‹¬é—®é¢˜ä¿®å¤ã€æ€§èƒ½ä¼˜åŒ–å’ŒåŠŸèƒ½æ”¹è¿›ã€‚

## ğŸ“‹ ä¿®æ”¹åˆ—è¡¨

### 1. åŸºç¡€é—®é¢˜ä¿®å¤

#### âœ… ä¿®å¤ 'SnakeGame' object has no attribute 'board' é”™è¯¯
- **é—®é¢˜**: SnakeEnvå°è¯•ç›´æ¥è®¿é—®`game.board`ï¼Œä½†SnakeGameæ²¡æœ‰ç›´æ¥çš„boardå±æ€§
- **è§£å†³æ–¹æ¡ˆ**: ä¿®æ”¹SnakeEnvä½¿ç”¨`get_state()['board']`è·å–æ£‹ç›˜çŠ¶æ€
- **æ–‡ä»¶**: `games/snake/snake_env.py`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

#### âœ… ä¿®å¤ç©å®¶åˆ‡æ¢é—®é¢˜
- **é—®é¢˜**: åªæœ‰ç”¨æˆ·çš„è›‡åœ¨ç§»åŠ¨ï¼ŒAIçš„è›‡ä¸ç§»åŠ¨
- **è§£å†³æ–¹æ¡ˆ**: åœ¨SnakeGameçš„stepæ–¹æ³•ä¸­æ·»åŠ `switch_player()`è°ƒç”¨
- **æ–‡ä»¶**: `games/snake/snake_game.py`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

#### âœ… ä¿®å¤è§‚å¯ŸçŠ¶æ€å¤„ç†
- **é—®é¢˜**: BaseEnvçš„stepæ–¹æ³•æ— æ³•æ­£ç¡®å¤„ç†å­—å…¸æ ¼å¼çš„è§‚å¯Ÿ
- **è§£å†³æ–¹æ¡ˆ**: æ·»åŠ å¯¹å­—å…¸æ ¼å¼è§‚å¯Ÿçš„å¤„ç†é€»è¾‘
- **æ–‡ä»¶**: `games/base_env.py`
- **çŠ¶æ€**: âœ… å·²ä¿®å¤

### 2. æ€§èƒ½ä¼˜åŒ–

#### âœ… MinimaxBotæ€§èƒ½ä¼˜åŒ–
- **é—®é¢˜**: MinimaxBotåœ¨Snakeæ¸¸æˆä¸­è¿è¡Œç¼“æ…¢
- **è§£å†³æ–¹æ¡ˆ**: 
  - æ·»åŠ Snakeæ¸¸æˆä¸“ç”¨å¤„ç†æ–¹æ³•
  - å®ç°åŠ¨æ€æ·±åº¦è°ƒæ•´
  - æ·»åŠ è¶…æ—¶æ£€æŸ¥
  - é™åˆ¶æœç´¢ç©ºé—´å’ŒåŠ¨ä½œæ•°é‡
- **æ–‡ä»¶**: `agents/ai_bots/minimax_bot.py`
- **çŠ¶æ€**: âœ… å·²ä¼˜åŒ–

#### âœ… æœç´¢ç©ºé—´ä¼˜åŒ–
- **åŠŸèƒ½**: é™åˆ¶æœç´¢åŠå¾„å’ŒåŠ¨ä½œæ•°é‡
- **å®ç°**: 
  - `get_nearby_actions()`: åªæœç´¢å·²æœ‰æ£‹å­å‘¨å›´åŒºåŸŸ
  - `sort_actions()`: ä¼˜å…ˆæœç´¢æ›´æœ‰å¸Œæœ›çš„åŠ¨ä½œ
  - åŠ¨æ€æ·±åº¦è°ƒæ•´
- **çŠ¶æ€**: âœ… å·²å®ç°

### 3. GUIä¿®å¤

#### âœ… æ¢å¤åŸå§‹GUIåŠŸèƒ½
- **é—®é¢˜**: GUIå®Œå…¨æ— æ³•æ‰“å¼€
- **è§£å†³æ–¹æ¡ˆ**: æ¢å¤æ‰€æœ‰æ–‡ä»¶åˆ°GUIæ­£å¸¸å·¥ä½œæ—¶çš„çŠ¶æ€
- **æ–‡ä»¶**: `snake_gui.py`, `games/snake/snake_game.py`, `games/snake/snake_env.py`
- **çŠ¶æ€**: âœ… å·²æ¢å¤

### 4. æµ‹è¯•å’ŒéªŒè¯

#### âœ… åˆ›å»ºæµ‹è¯•è„šæœ¬
- **åŠŸèƒ½**: éªŒè¯æ‰€æœ‰ä¿®æ”¹çš„æ­£ç¡®æ€§
- **æ–‡ä»¶**: 
  - `test_snake_turn.py`: æµ‹è¯•ç©å®¶åˆ‡æ¢
  - `test_minimax_performance.py`: æµ‹è¯•Minimaxæ€§èƒ½
  - `comprehensive_snake_test.py`: å…¨é¢æµ‹è¯•
- **çŠ¶æ€**: âœ… å·²åˆ›å»º

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### Snakeæ¸¸æˆé€»è¾‘
```python
# ç©å®¶åˆ‡æ¢é€»è¾‘
if not done:
    self.switch_player()

# çŠ¶æ€è·å–
def get_state(self):
    board = np.zeros((self.board_size, self.board_size), dtype=int)
    # ... ç»˜åˆ¶è›‡å’Œé£Ÿç‰©
    return {
        'board': board,
        'snake1': self.snake1.copy(),
        'snake2': self.snake2.copy(),
        # ... å…¶ä»–çŠ¶æ€
    }
```

### MinimaxBotä¼˜åŒ–
```python
# Snakeæ¸¸æˆä¸“ç”¨å¤„ç†
def _get_best_snake_action(self, valid_actions, env):
    # ç­–ç•¥1: å¯»æ‰¾æœ€è¿‘çš„é£Ÿç‰©
    # ç­–ç•¥2: é€‰æ‹©å®‰å…¨çš„ç§»åŠ¨æ–¹å‘
    # ç­–ç•¥3: é¿å…ç¢°æ’

# æ€§èƒ½ä¼˜åŒ–
def _calculate_dynamic_depth(self, env):
    # æ ¹æ®æ¸¸æˆé˜¶æ®µè°ƒæ•´æœç´¢æ·±åº¦
```

### ç¯å¢ƒæ¥å£
```python
# è§‚å¯ŸçŠ¶æ€å¤„ç†
if isinstance(observation, dict) and 'board' in observation:
    observation = observation['board']
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### å…¨é¢æµ‹è¯•ç»“æœ (7/7 é€šè¿‡)
- âœ… å¯¼å…¥æµ‹è¯•
- âœ… æ¸¸æˆé€»è¾‘æµ‹è¯•
- âœ… ç¯å¢ƒæµ‹è¯•
- âœ… ç©å®¶åˆ‡æ¢æµ‹è¯•
- âœ… AIæ™ºèƒ½ä½“æµ‹è¯•
- âœ… Minimaxæ€§èƒ½æµ‹è¯•
- âœ… GUIç»„ä»¶æµ‹è¯•

### æ€§èƒ½æµ‹è¯•ç»“æœ
- MinimaxBotæ€è€ƒæ—¶é—´: < 0.001ç§’
- è¯„ä¼°èŠ‚ç‚¹æ•°: 0 (Snakeæ¸¸æˆä½¿ç”¨ä¸“ç”¨ç­–ç•¥)
- ç©å®¶åˆ‡æ¢: æ­£å¸¸å·¥ä½œ
- GUIç»„ä»¶: æ­£å¸¸åˆå§‹åŒ–

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è¿è¡ŒSnakeæ¸¸æˆ
```bash
python snake_gui.py
```

### è¿è¡Œæµ‹è¯•
```bash
# ç©å®¶åˆ‡æ¢æµ‹è¯•
python test_snake_turn.py

# Minimaxæ€§èƒ½æµ‹è¯•
python test_minimax_performance.py

# å…¨é¢æµ‹è¯•
python comprehensive_snake_test.py
```

## ğŸ® æ¸¸æˆç‰¹æ€§

### åŒäººæ¸¸æˆ
- ç©å®¶1 (è“è‰²è›‡): ä½¿ç”¨æ–¹å‘é”®æˆ–WASDæ§åˆ¶
- ç©å®¶2 (çº¢è‰²è›‡): AIæ§åˆ¶

### AIé€‰é¡¹
- Basic AI: åŸºç¡€è´ªåƒè›‡AI
- Smart AI: æ™ºèƒ½è´ªåƒè›‡AI
- Random AI: éšæœºAI
- Minimax AI: ä¼˜åŒ–çš„Minimaxç®—æ³•

### æ¸¸æˆè§„åˆ™
- åƒé£Ÿç‰©å¢é•¿
- é¿å…æ’å¢™å’Œæ’è›‡
- æœ€åå­˜æ´»çš„è›‡è·èƒœ

## ğŸ” é—®é¢˜æ’æŸ¥

### å¦‚æœGUIæ— æ³•æ‰“å¼€
1. æ£€æŸ¥WSLç¯å¢ƒè®¾ç½®
2. è¿è¡Œ: `python test_restore.py`
3. æ£€æŸ¥X11æœåŠ¡å™¨: `echo $DISPLAY`

### å¦‚æœAIè¿è¡Œç¼“æ…¢
1. æ£€æŸ¥MinimaxBoté…ç½®
2. è¿è¡Œæ€§èƒ½æµ‹è¯•: `python test_minimax_performance.py`
3. è°ƒæ•´æœç´¢æ·±åº¦å‚æ•°

### å¦‚æœç©å®¶åˆ‡æ¢å¼‚å¸¸
1. è¿è¡Œç©å®¶åˆ‡æ¢æµ‹è¯•: `python test_snake_turn.py`
2. æ£€æŸ¥SnakeGameçš„stepæ–¹æ³•

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **WSLç¯å¢ƒ**: åœ¨WSLä¸­è¿è¡ŒGUIéœ€è¦æ­£ç¡®çš„X11è®¾ç½®
2. **æ€§èƒ½**: MinimaxBotå·²é’ˆå¯¹Snakeæ¸¸æˆä¼˜åŒ–ï¼Œé¿å…æ·±åº¦æœç´¢
3. **å…¼å®¹æ€§**: æ‰€æœ‰ä¿®æ”¹éƒ½ä¿æŒäº†å‘åå…¼å®¹æ€§
4. **æµ‹è¯•**: å»ºè®®åœ¨ä¿®æ”¹åè¿è¡Œå…¨é¢æµ‹è¯•

## ğŸ‰ æ€»ç»“

æ‰€æœ‰Snakeæ¸¸æˆä¿®æ”¹å·²å®Œæˆå¹¶ç»è¿‡å…¨é¢æµ‹è¯•ï¼š

- âœ… åŸºç¡€åŠŸèƒ½ä¿®å¤
- âœ… æ€§èƒ½ä¼˜åŒ–
- âœ… GUIæ¢å¤
- âœ… æµ‹è¯•éªŒè¯
- âœ… æ–‡æ¡£å®Œå–„

æ¸¸æˆç°åœ¨å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½æŒ‰é¢„æœŸå·¥ä½œã€‚ 